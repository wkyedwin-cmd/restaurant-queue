<script>
function render(list){

  const container = document.getElementById("results");
  container.innerHTML = "";

  // åˆ†ç»„
  const active = [];
  const finished = [];

  list.forEach(item=>{
    if(item.status==="completed" || item.status==="cancelled"){
      finished.push(item);
    }else{
      active.push(item);
    }
  });

  // æœªå¤„ç†æŒ‰æ—¶é—´æ’åºï¼ˆæœ€æ—©åœ¨ä¸Šï¼‰
  active.sort((a,b)=> (a.timestamp||0)-(b.timestamp||0));

  // å·²å¤„ç†ä¹ŸæŒ‰æ—¶é—´æ’åºï¼ˆå¯é€‰ï¼‰
  finished.sort((a,b)=> (a.timestamp||0)-(b.timestamp||0));

  const finalList = [...active, ...finished];

  finalList.forEach(item=>{

    container.innerHTML += `
    <div style="
      border:1px solid #ccc;
      margin:6px;
      padding:10px;
      background:${getColor(item.status)};
    ">

    ğŸ“… æ—¥æœŸ: ${item.date || "-"}<br>
    â° æ—¶é—´: ${item.time || "-"}<br>
    ğŸ†” æ’å·: <b>${item.queueNumber || "-"}</b><br>
    ğŸ‘¤ å§“å: ${item.name || "-"}<br>
    ğŸ“ ç”µè¯: ${item.phone || "-"}<br>
    ğŸ‘¨ æˆäºº: ${item.adults || 0}<br>
    ğŸ‘¶ å®å®æ¤…: ${item.babyChairs || 0}<br>
    ğŸª‘ åº§ä½: ${item.seatPreference || "-"}<br>
    ğŸ· æ¡Œå·: ${item.tableNumber || "-"}<br>
    ğŸ“Œ çŠ¶æ€: ${item.status || "-"}<br><br>

    <button onclick="openWhatsApp('${item.phone}')">
    ğŸ“± WhatsApp
    </button>

    ${item.status==="waiting" ?
    `<button onclick="assignTable('${item.id}')">
    ç¡®è®¤åˆ°åº—+åˆ†æ¡Œ
    </button>` : ""}

    ${item.status==="seated" ?
    `<button onclick="updateStatus('${item.id}','completed')">
    å…¥åº§å®Œæˆ
    </button>` : ""}

    <button onclick="updateStatus('${item.id}','cancelled')">
    å–æ¶ˆ
    </button>

    </div>
    `;
  });
}
</script>
