<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Queue System</title>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAhha-pRzGBXHfSO3PdZ0UmLgGtxfLWcPQ",
  authDomain: "yunnans-1u.firebaseapp.com",
  projectId: "yunnans-1u",
  storageBucket: "yunnans-1u.firebasestorage.app",
  messagingSenderId: "490439485047",
  appId: "1:490439485047:web:42d5ca722ade09c6b88872"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function today(){
  return new Date().toISOString().split("T")[0];
}

function joinQueue(){

  const name = document.getElementById("name").value;
  const phone = document.getElementById("phone").value;
  const adults = document.getElementById("adults").value;
  const babyChairs = document.getElementById("babyChairs").value;
  const seat = document.querySelector('input[name="seat"]:checked');

  if(!name || !phone || !adults || !seat){
    alert("请填写完整资料");
    return;
  }

  db.collection("queues").add({
    name: name,
    phone: phone,
    adults: parseInt(adults),
    babyChairs: parseInt(babyChairs) || 0,
    seatPreference: seat.value,
    status: "waiting",
    date: today(),
    timestamp: Date.now()
  }).then(()=>{
    alert("提交成功，请等待通知");
  });
}
</script>

</head>

<body>

<h2>🍜 排队系统</h2>

姓名 Name:<br>
<input id="name"><br><br>

电话 Phone (+60):<br>
<input id="phone"><br><br>

成人数量 Adults:<br>
<input type="number" id="adults"><br><br>

宝宝椅 Baby Chairs:<br>
<input type="number" id="babyChairs" value="0"><br><br>

<h3>座位偏好</h3>

<input type="radio" name="seat" value="室内 Indoor"> 室内<br>
<input type="radio" name="seat" value="室外 Outdoor"> 室外<br>
<input type="radio" name="seat" value="随意最快 No Preference"> 随意最快<br><br>

<button onclick="joinQueue()">提交 Submit</button>

</body>
</html>
